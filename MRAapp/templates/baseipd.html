{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}แบบตรวจประเมินคุณภาพการบันทึกเวชระเบียนผู้ป่วยใน Medical Record Audit Form (IPD){% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    {% block head %}{% endblock %}
</head>
<!-- (ไม่บังคับ) โหลดฟอนต์ไทยเวลา print -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap">

<style>
/* ปุ่ม/บล็อกที่ให้แสดงเฉพาะหน้าจอ */
.no-print { display: inline-block; }
.print-only { display: none; }

/* utility */
.page-break { page-break-before: always; }

/* สไตล์สำหรับการพิมพ์ */
@media print {
  @page { size: A4 portrait; margin: 12mm; }    /* เปลี่ยนเป็น landscape ได้ด้านล่างด้วย JS */
  html, body { height: auto; }
  body {
    font-family: "Sarabun", "TH Sarabun New", Tahoma, sans-serif;
    font-size: 11pt;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* ซ่อนสิ่งที่ไม่อยากพิมพ์ */
  .no-print, .btn, .navbar, .nav, .sidebar, .footer, .alert { display: none !important; }

  /* ขยายคอนเทนเนอร์ให้เต็มกระดาษ */
  .container, .container-fluid { width: auto !important; max-width: none !important; padding: 0 !important; }

  /* การ์ดให้ขอบบาง ไม่มีเงา และไม่แตกหน้า */
  .card {
    box-shadow: none !important;
    border: 1px solid #999 !important;
    break-inside: avoid;
    page-break-inside: avoid;
    margin-bottom: 8mm;
  }
  .card-header {
    background: #f2f2f2 !important;
    border-bottom: 1px solid #999 !important;
  }

  /* ตารางอ่านง่าย และหัวตารางซ้ำทุกหน้า */
  .table { font-size: 10pt; }
  .table thead { display: table-header-group; }
  .table tfoot { display: table-footer-group; }
  .table tr { page-break-inside: avoid; }

  /* แสดงบล็อกเฉพาะตอนพิมพ์ */
  .print-only { display: block !important; }
}
</style>

<body>
    
    <!-- Navbar -->
<nav class="bg-white shadow-md px-6 py-4 flex items-center justify-between relative" style="z-index: 10;">
    <!-- Left: Logo + Hospital Name -->
    <div class="flex items-center gap-3 sm:gap-4 lg:gap-6">
  <a href="/" class="flex items-center gap-2 sm:gap-3">
    <img src="{% static 'MRAapp/images/sdh.png' %}" alt="Logo" class="h-10 w-10 rounded-full">
    <span class="text-lg font-semibold text-gray-800">โรงพยาบาลสมเด็จ</span>
  </a>

  <!-- <a href="{% url 'MRA:opd_score_list' %}" class="text-gray-700 hover:text-blue-600">
    OPD
  </a> -->
  <div class="dropdown">
  <button class="btn dropdown-toggle font-semibold text-gray-800"
          style="font-size:16px"
          type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
    รายการ OPD IPD
  </button>

  {% with name=request.resolver_match.url_name %}
  <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <li>
      <a class="dropdown-item {% if name == 'score_list' %}active{% endif %}"
         {% if name == 'score_list' %}aria-current="page"{% endif %}
         href="{% url 'MRA:score_list' %}">
        รายการ IPD
      </a>
    </li>

    <li>
      <a class="dropdown-item {% if name == 'score_create' %}active{% endif %}"
         {% if name == 'score_create' %}aria-current="page"{% endif %}
         href="{% url 'MRA:score_create' %}">
        บันทึกผลคะแนน IPD
      </a>
    </li>

    <li><hr class="dropdown-divider"></li>

    <li>
      <a class="dropdown-item {% if name == 'opd_score_list' %}active{% endif %}"
         {% if name == 'opd_score_list' %}aria-current="page"{% endif %}
         href="{% url 'MRA:opd_score_list' %}">
        รายการ OPD
      </a>
    </li>

    <li>
      <a class="dropdown-item {% if name == 'opd_score_create' %}active{% endif %}"
         {% if name == 'opd_score_create' %}aria-current="page"{% endif %}
         href="{% url 'MRA:opd_score_create' %}">
        บันทึกผลคะแนน OPD
      </a>
    </li>
  </ul>
  {% endwith %}
</div>
</div>

    <!-- Center: System Name -->
    <div class="absolute left-1/2 transform -translate-x-1/2">
        <span class="text-xl font-bold text-blue-800">Medical Record Audit (MRA)</span>
    </div>
    

    <!-- Right: Login/Logout -->
     {% if request.path == '/listformdata' or request.path == '/report' or request.path|slice:":8" == '/scores/' or request.resolver_match.url_name == 'score_detail' or request.path == '/scores/new/'%}
    
    <div class="flex items-center space-x-4">
        {% if user.is_authenticated %}
            <span class="text-gray-600">สวัสดี {{ user.username }}</span>
            <a href="{% url 'logout' %}" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                Logout
            </a>
        {% else %}
            <a href="{% url 'login' %}" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                Login
            </a>
        {% endif %}
    </div>
    {% endif %}
    
</nav>

    {% block content %}{% endblock %}
    

</body>

</html>